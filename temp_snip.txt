        }
    }

} // namespace

void ui_app_init(void)
{
    // Время последнего ввода (как у тебя было)
    s_last_input_us = esp_timer_get_time();

    // Set the theme
    // lv_disp_t *dispp = lv_disp_get_default();
    // lv_theme_t *theme = lv_theme_default_init(dispp, lv_palette_main(LV_PALETTE_BLUE), lv_palette_main(LV_PALETTE_RED), true, LV_FONT_DEFAULT);
    // lv_disp_set_theme(dispp, theme);

    // 1. Построить все скрины
    ui_build_kitchen_screen();
    ui_build_hallway_screen();
    ui_build_screensaver_screen();

    // 2. Показать стартовый (можно ScreenSaver или Kitchen)
    lv_disp_load_scr(s_kitchen_scr);
    // или:
    // ui_show_screen(UiScreen::Kitchen);

    // 3. Таймер для UI — оставляем твой код
    {
        const auto &ents = state::entities();
        for (const auto &e : ents)
        {
            int id = state::subscribe_entity(e.id, &on_state_entity_changed);
            if (id > 0)
                s_state_subscriptions.push_back(id);
        }
    }

    if (s_ha_ui_timer == NULL)
    {
        esp_timer_create_args_t args = {};
        args.callback = &ha_ui_timer_cb;
